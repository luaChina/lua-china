<template>
    <div class="footer-wrapper mt-5 text-sm">
        
        <!-- White Background Section -->
        <div class="bg-white text-dark py-5">
            <div class="max-w-screen-2xl mx-auto px-0 sm:px-2">
                <!-- Section 0: Guide -->
                <div class="row mb-5">
                    <div class="col-12 col-md-6 mb-3 mb-md-0">
                        <router-link to="/community-rules" class="block text-decoration-none group">
                            <div class="bg-red-50 rounded p-4 border border-red-100 flex items-center hover:shadow-md transition">
                                <div class="bg-red-100 text-red-600 w-12 h-12 rounded-full flex items-center justify-center mr-4 flex-shrink-0 group-hover:bg-red-600 group-hover:text-white transition">
                                    <i class="bi bi-shield-check text-xl"></i>
                                </div>
                                <div>
                                    <h6 class="text-gray-800 font-bold text-lg mb-1 group-hover:text-red-600 transition">ç¤¾åŒºè§„èŒƒ</h6>
                                    <p class="text-gray-500 text-sm mb-0">äº†è§£ç¤¾åŒºè¡Œä¸ºå‡†åˆ™ï¼Œå…±å»ºè‰¯å¥½æ°›å›´</p>
                                </div>
                                <i class="bi bi-arrow-right ml-auto text-gray-400 group-hover:text-red-600 transition"></i>
                            </div>
                        </router-link>
                    </div>
                    <div class="col-12 col-md-6">
                        <router-link to="/publishing-guide" class="block text-decoration-none group">
                            <div class="bg-blue-50 rounded p-4 border border-blue-100 flex items-center hover:shadow-md transition">
                                <div class="bg-blue-100 text-blue-600 w-12 h-12 rounded-full flex items-center justify-center mr-4 flex-shrink-0 group-hover:bg-blue-600 group-hover:text-white transition">
                                    <i class="bi bi-pencil-square text-xl"></i>
                                </div>
                                <div>
                                    <h6 class="text-gray-800 font-bold text-lg mb-1 group-hover:text-blue-600 transition">å‘æ–‡æŒ‡å—</h6>
                                    <p class="text-gray-500 text-sm mb-0">å¦‚ä½•æ’°å†™é«˜è´¨é‡çš„æŠ€æœ¯æ–‡ç« </p>
                                </div>
                                <i class="bi bi-arrow-right ml-auto text-gray-400 group-hover:text-blue-600 transition"></i>
                            </div>
                        </router-link>
                    </div>
                </div>

                <!-- Section 1: Community Articles -->
                <div class="row mb-5">
                    <div class="col-12 mb-3">
                        <h5 class="text-dark border-l-4 border-red-600 pl-2 font-bold">ç¤¾åŒºæ–‡ç« </h5>
                    </div>
                    <div class="col-12 col-md-3 mb-3" v-for="post in posts" :key="post.id">
                        <div class="bg-white rounded p-3 h-100 shadow-sm border border-gray-100 hover:shadow-md transition">
                            <router-link :to="'/posts/' + post.id" class="text-dark text-decoration-none block h-100 flex flex-col justify-between">
                                <h6 class="font-bold text-truncate mb-2 text-gray-800">{{ post.title }}</h6>
                                <div class="flex items-center justify-between mt-2 pt-2 border-t border-gray-50">
                                    <div class="flex items-center text-gray-500 text-xs">
                                        <hash-avatar
                                            :url="post.user.avatar"
                                            :user_id="post.user.id"
                                            :size="24"
                                            :alt="post.user.name"
                                            class="rounded-full mr-2"
                                        ></hash-avatar>
                                        <span class="truncate max-w-[80px]">{{ post.user.name }}</span>
                                    </div>
                                    <div class="text-gray-400 text-xs flex items-center">
                                        <i class="bi bi-eye mr-1"></i>
                                        <span>{{ post.read_count }}</span>
                                    </div>
                                </div>
                            </router-link>
                        </div>
                    </div>
                </div>

                <!-- Section 2: Open Source Projects -->
                <div class="row mb-4">
                    <div class="col-12 mb-3">
                        <h5 class="text-dark border-l-4 border-red-600 pl-2 font-bold">å¼€æºé¡¹ç›® & åº”ç”¨</h5>
                    </div>
                    
                    <!-- Game Development -->
                    <div class="col-12 mb-2">
                        <h6 class="text-gray-600 font-bold border-bottom pb-2 mb-3">ğŸ® æ¸¸æˆå¼€å‘</h6>
                    </div>
                    <div class="col-12 col-md-3 mb-3" v-for="project in gameProjects" :key="project.name">
                        <a :href="project.link" target="_blank" class="block h-100 text-decoration-none">
                            <div class="bg-white rounded p-3 h-100 shadow-sm border border-gray-100 hover:shadow-md transition flex flex-col items-center justify-center text-center">
                                <h6 class="text-gray-800 font-bold mb-1">{{ project.name }}</h6>
                                <span class="text-gray-500 text-xs">{{ project.desc }}</span>
                            </div>
                        </a>
                    </div>

                    <!-- Web Services -->
                    <div class="col-12 mt-4 mb-2">
                        <h6 class="text-gray-600 font-bold border-bottom pb-2 mb-3">ğŸŒ é«˜æ€§èƒ½ç½‘ç»œä¸ Web æœåŠ¡</h6>
                    </div>
                    <div class="col-12 col-md-3 mb-3" v-for="project in webProjects" :key="project.name">
                        <a :href="project.link" target="_blank" class="block h-100 text-decoration-none">
                            <div class="bg-white rounded p-3 h-100 shadow-sm border border-gray-100 hover:shadow-md transition flex flex-col items-center justify-center text-center">
                                <h6 class="text-gray-800 font-bold mb-1">{{ project.name }}</h6>
                                <span class="text-gray-500 text-xs">{{ project.desc }}</span>
                            </div>
                        </a>
                    </div>

                    <!-- System & Tools -->
                    <div class="col-12 mt-4 mb-2">
                        <h6 class="text-gray-600 font-bold border-bottom pb-2 mb-3">âš™ï¸ åµŒå…¥å¼ç³»ç»Ÿä¸åº”ç”¨å·¥å…·</h6>
                    </div>
                    <div class="col-12 col-md-3 mb-3" v-for="project in systemProjects" :key="project.name">
                        <a :href="project.link" target="_blank" class="block h-100 text-decoration-none">
                            <div class="bg-white rounded p-3 h-100 shadow-sm border border-gray-100 hover:shadow-md transition flex flex-col items-center justify-center text-center">
                                <h6 class="text-gray-800 font-bold mb-1">{{ project.name }}</h6>
                                <span class="text-gray-500 text-xs">{{ project.desc }}</span>
                            </div>
                        </a>
                    </div>

                    <!-- AI & Science -->
                    <div class="col-12 mt-4 mb-2">
                        <h6 class="text-gray-600 font-bold border-bottom pb-2 mb-3">ğŸ§  äººå·¥æ™ºèƒ½ä¸ç§‘å­¦è®¡ç®—</h6>
                    </div>
                    <div class="col-12 col-md-3 mb-3" v-for="project in aiProjects" :key="project.name">
                        <a :href="project.link" target="_blank" class="block h-100 text-decoration-none">
                            <div class="bg-white rounded p-3 h-100 shadow-sm border border-gray-100 hover:shadow-md transition flex flex-col items-center justify-center text-center">
                                <h6 class="text-gray-800 font-bold mb-1">{{ project.name }}</h6>
                                <span class="text-gray-500 text-xs">{{ project.desc }}</span>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Black Background Section -->
        <div class="bg-black text-white py-5">
            <div class="max-w-screen-2xl mx-auto px-0 sm:px-2">
                <!-- Section 3: Original Footer Content -->
                <div class="row text-center pt-2">
                    <div class="col">
                        <p class="text-light font-bold mb-3">å…³äº Lua ç¤¾åŒº</p>
                        <p class="text-gray-400 text-xs mb-3">Lua ç¤¾åŒºä¸ºå¼€å‘è€…æä¾›å­¦ä¹ äº¤æµçš„å¹³å°ï¼Œå†…å®¹æ¿å—ä¸º Lua å¼€å‘ï¼ŒOpenresty å¼€å‘ï¼Œé€†å‘åˆ†æå¼€å‘ï¼Œæ¸¸æˆé€†å‘ç­‰</p>
                        <ul class="text-secondary p-0 list-unstyled">
                            <li><a class="text-secondary text-decoration-none hover:text-white transition" href="https://github.com/horan-geeker/nana" target="_blank" rel="nofollow">Nana æ¡†æ¶ (å¼€æº Lua Web æ¡†æ¶)</a></li>
                            <li><a class="text-secondary text-decoration-none hover:text-white transition" href="https://github.com/luaChina/lua-china" target="_blank" rel="nofollow">ç¤¾åŒºå‰ç«¯ (Vue + Nuxt.js)</a></li>
                            <li><a class="text-secondary text-decoration-none hover:text-white transition" href="https://github.com/luaChina/lua-china-api" target="_blank" rel="nofollow">ç¤¾åŒºåç«¯ (åŸºäº Nana å®Œæˆçš„åç«¯å»ºè®¾)</a></li>
                        </ul>
                    </div>
                    <div class="col">
                        <p class="text-light font-bold mb-3">ç¤¾åŒºå…±å»º</p>
                        <div class="text-secondary small">
                            <p class="mb-2">æ¬¢è¿æ PR å¢åŠ ç¤¾åŒºèƒ½åŠ›</p>
                            <div class="wechat-qrcode-wrapper d-inline-block">
                                <span class="text-secondary pointer hover:text-white transition">ä»»ä½•æ„è§å’Œåé¦ˆéƒ½æ˜¯æˆ‘ä»¬å‰è¿›çš„åŸºçŸ³</span>
                                <img class="wechat-qrcode rounded shadow-lg" src="https://lua-china-1256147061.cos.accelerate.tencentcos.cn/public/wechat-qrcode.png" alt="WeChat QR" width="120" />
                            </div>
                            <p class="mb2 mt-2">ç¤¾åŒºä½¿ç”¨æŒ‡å—</p>
                            <p class="mb2">æ–‡æ¡£æ’°å†™æŒ‡å—</p>
                        </div>
                    </div>
                    <div class="col">
                        <p class="text-light font-bold mb-3">ç¤¾åŒºèµåŠ©å•†</p>
                        <ul class="text-secondary p-0 list-unstyled">
                            <li><span class="text-secondary">ç©ºä½ä»¥å¾…</span></li>
                            <li><span class="text-secondary">æœ‰æ„å‘å¯ä»¥è”ç³»ç«™é•¿</span></li>
                        </ul>
                    </div>
                    <div class="col">
                        <p class="text-light font-bold mb-3">ç»Ÿè®¡ä¿¡æ¯</p>
                        <ul class="text-secondary p-0 list-unstyled">
                            <li>ä¼šå‘˜ {{users_count}}</li>
                            <li>æ–‡ç« æ•°: {{posts_count}}</li>
                            <li>è¯é¢˜æ•°: ...</li>
                        </ul>
                    </div>
                </div>
                <div class="row border-top border-gray-800 mt-5 pt-4">
                    <div class="col">
                        <div class="footer-copyright text-center text-gray-500 text-xs">Designed by
                            <i class="bi bi-layout-wtf"></i>
                            <a class="text-gray-400 font-italic hover:text-white transition" href="https://github.com/horan-geeker" target="_blank" rel="nofollow"> Horan</a>
                            and
                            <a class="text-gray-400 font-italic hover:text-white transition" href="https://github.com/AmazingMoon" target="_blank" rel="nofollow"> Amazing</a>
                            <div class="mt-1"><a class="text-gray-500 font-italic text-decoration-none hover:text-white transition" href="https://beian.miit.gov.cn" target="_blank">é™•ICPå¤‡16002741å·</a></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<script>
    import apiService from '~/services/apiService'
    import HashAvatar from "~/components/hash-avatar";

    export default {
        name: 'Footer',
        components: {
            "hash-avatar": HashAvatar,
        },
        data() {
            return {
                posts_count: 0,
                users_count: 0,
                posts: [],
                gameProjects: [
                    { name: "World of Warcraft", desc: "UI æ’ä»¶å’Œå®çš„è„šæœ¬è¯­è¨€", link: "https://worldofwarcraft.com/" },
                    { name: "Roblox", desc: "åœ¨çº¿åˆ›ä½œå¹³å° (Luau)", link: "https://www.roblox.com/" },
                    { name: "Defold", desc: "è½»é‡çº§ 2D æ¸¸æˆå¼•æ“", link: "https://defold.com/" },
                    { name: "LÃ–VE 2D", desc: "2D æ¸¸æˆå¼€å‘æ¡†æ¶", link: "https://love2d.org/" }
                ],
                webProjects: [
                    { name: "OpenResty", desc: "é«˜æ€§èƒ½ Web åº”ç”¨å¹³å°", link: "https://openresty.org/" },
                    { name: "Kong", desc: "äº‘åŸç”Ÿ API ç½‘å…³", link: "https://konghq.com/" },
                    { name: "Redis", desc: "é«˜æ€§èƒ½é”®å€¼æ•°æ®åº“", link: "https://redis.io/" },
                    { name: "Nmap", desc: "ç½‘ç»œå®‰å…¨æ‰«ææ‰©å±• (NSE)", link: "https://nmap.org/" },
                    { name: "LuaJIT", desc: "é«˜æ€§èƒ½ JIT ç¼–è¯‘å™¨", link: "http://luajit.org/" },
                    { name: "Wapiti", desc: "Web åº”ç”¨æ¼æ´æ‰«æ", link: "http://wapiti.sourceforge.net/" },
                    { name: "Wireshark", desc: "ç½‘ç»œåè®®åˆ†æ", link: "https://www.wireshark.org/" }
                ],
                systemProjects: [
                    { name: "LuatOS", desc: "è¿è¡Œåœ¨åµŒå…¥å¼è®¾å¤‡çš„ Lua", link: "https://wiki.luatos.com/" },
                    { name: "TeX Live", desc: "å¼ºå¤§çš„æ’ç‰ˆç³»ç»Ÿè„šæœ¬", link: "https://www.tug.org/texlive/" },
                    { name: "Awesome WM", desc: "çª—å£ç®¡ç†å™¨", link: "https://awesomewm.org/" },
                    { name: "Vim/Neovim", desc: "æ–‡æœ¬ç¼–è¾‘å™¨", link: "https://neovim.io/" },
                    { name: "FFmpeg", desc: "å¤šåª’ä½“å¤„ç†", link: "https://ffmpeg.org/" }
                ],
                aiProjects: [
                    { name: "Torch", desc: "æœºå™¨å­¦ä¹ æ¡†æ¶", link: "http://torch.ch/" },
                    { name: "SciLua", desc: "ç§‘å­¦è®¡ç®—åº“", link: "http://scilua.org/" }
                ]
            }
        },
        created() {
            apiService.get('/posts/count').then(response => {
                this.posts_count = response.data.data
            })
            apiService.get('/users/count').then(response => {
                this.users_count = response.data.data
            })
            apiService.get('/posts?pagesize=4').then(response => {
                this.posts = response.data.data.data
            })
        }
    }
</script>

<style lang="scss" scoped>
    /* Removed global footer background to allow split backgrounds */


    .link {
        color: #ffffff;
    }

    .footer-copyright {
        font-size: 12px;
        opacity: 0.6;
        line-height: 36px;
    }

    .wechat-qrcode {
        top: -100px;
        position: absolute;
        opacity: 0;
        transition: opacity .6s;
    }

    .wechat-qrcode-wrapper {
        position: relative;
        cursor: pointer;
        &:hover {
            .wechat-qrcode {
                opacity: 1;
            }
        }
    }

    .qq-qrcode {
        top: -100px;
        position: absolute;
        opacity: 0;
        transition: opacity .6s;
    }

    .qq-qrcode-wrapper {
        position: relative;
        cursor: pointer;
        &:hover {
            .qq-qrcode {
                opacity: 1;
            }
        }
    }

</style>
